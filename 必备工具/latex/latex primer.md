# latex 入门

##  latex 的配置

### 本地配置 latex 编译器

> [Visual Studio Code (vscode)配置LaTeX - 知乎](https://zhuanlan.zhihu.com/p/166523064) 算是最好的配置教程了

上面是 windows 上的最佳实践，不过转到 macOS 后没有尝试在本地编译 latex 了，故没有配本地环境。

### Overleaf

Overleaf 是一个广受欢迎的在线、协作式 LaTeX 编辑器，专为学术写作设计。它最大的优势在于将复杂的 LaTeX 环境搬到了云端，用户无需在自己的电脑上进行任何安装和配置，只需要一个浏览器即可随时随地撰写和编辑**论文、报告或简历**。其核心特色包括实时预览（代码与生成的PDF文档并排显示）、便捷的协作功能（可以像谷歌文档一样邀请导师或同学共同编辑）以及丰富的官方模板库（涵盖了世界各地主流期刊、会议和大学的学位论文格式），极大地降低了 LaTeX 的入门门槛，并提升了学术写作的效率。

## 论文写作 - 入门

### 文件格式扫盲

#### 核心文件 (你自己写的)

- `*.tex`: **主文件/源文件**。你写论文的地方。
- `*.bib`: **文献数据库文件**。存放所有参考文献的原始数据。

#### 样式与模板文件 (你引用的)

- `*.cls`: **文档类文件 (Class)**。决定论文的**整体结构和布局**，如页边距、章节标题样式、字体大小等。例如 `CjC.cls` 就是《计算机学报》的文档类。
- `*.bst`: **参考文献样式文件 (Bibliography Style)**。决定文末参考文献列表的**具体格式**。例如 `gbt7714-2015.bst` 就是国标格式。
- `*.sty`: **宏包文件 (Style/Package)**。提供额外的功能或命令，像插件一样。例如 `\usepackage{graphicx}` 就是加载用于插图的宏包。

#### 自动生成文件 (你不用管，但出问题时要看)

- `*.aux`: **辅助文件**。记录交叉引用的信息，是 LaTeX 和 BibTeX 之间沟通的桥梁。它会告诉 BibTeX 文中引用了哪些文献。
- `*.bbl`: **格式化后的文献列表**。BibTeX 读取 `.aux` 和 `.bib` 后，根据 `.bst` 的规则，生成这个文件。它本质上就是一个写好了的 `thebibliography` 环境。
- `*.log`: **主日志文件**。记录 LaTeX 编译过程的所有信息，**找错误**首先看它。
- `*.blg`: **BibTeX 日志文件**。如果参考文献出错（例如找不到 `.bst` 文件、`.bib` 里有语法错误），**专门看这个日志文件**，信息非常明确。

### 文献管理的最佳实践

**核心原则：放弃手动 `thebibliography`，永远使用 BibTeX 自动化管理！**

**1. 核心理念：内容与样式分离**

- **`.bib` 文件 (内容)**：你的私人文献数据库。只负责存储文献的元数据（作者、标题、年份等），不关心格式。
- **`.bst` 文件 (样式)**：你的参考文献格式模板。负责规定最终 PDF 中参考文献列表的样式（排序、作者格式、标点等）。

**2. 标准工作流程**

1. **建立数据库 (`.bib` 文件)**

   - 创建一个 `references.bib` 文件。

   - 从 Google Scholar, DBLP 等网站导出标准 BibTeX 条目粘贴进去。

   - 为每个条目设置一个唯一的、好记的引用键 (Citation Key)，例如： 

     ```tex
     llava2_2023
     gpt3_2021
     lora_2022
     ```

     完整条目类似于：

     ```latex
     @inproceedings{lora_2022,
       title={{LoRA: ...}},
       author={Hu, Edward J. and ...},
       booktitle={ICLR},
       year={2022}
     }
     ```

2. **在正文引用 (`.tex` 文件)**

   - 在导言区加载 `natbib` 包以获得更好的控制权：`\usepackage[numbers, sort&compress]{natbib}`。

   - 在正文中，使用  `\cite{引用键}` 或自定义(类似的命令)的  `\upcite{引用键}`来引用文献。

     ```
     ...这是通过LoRA\upcite{lora22}实现的。
     ```

3. **在文末链接并指定样式 (`.tex` 文件)**

   - 在文档末尾 `\end{document}` 前用两行代码代替所有手写条目：

     ```latex
     \bibliographystyle{gbt7714-2015} % 指定样式文件
     \bibliography{references}      % 链接到你的 .bib 数据库
     ```

**3. 编译（最关键的步骤）**

- BibTeX 工作流需要多步编译才能正确链接引用。
- **标准顺序**: **LaTeX → BibTeX → LaTeX → LaTeX**。
- 在 Overleaf:
  1. 确保编译器（Menu -> Compiler）是 **XeLaTeX**。
  2. 点击 **"Recompile"**。Overleaf 通常会自动处理完整流程。
  3. 如果引用显示为 `[?]`，点击 "Recompile" 按钮旁的小箭头，选择 **"Recompile from scratch"** 或先 **"Clear cached files"** 再重新编译。



### 一些排版小技巧

#### 1. 垂直间距 (Vertical Spacing)

- `\vspace{length}`
  - **作用**: 强制插入一个指定高度的垂直空白。可以用在段落之间、图文之间等。
  - **示例**: `\vspace{5mm}` 会插入5毫米的空白。
  - **技巧**: 使用带星号的版本 `\vspace*{length}`。普通 `\vspace` 在一页的顶端或底端可能会被 LaTeX "吃掉"，而 `\vspace*` 会被强制保留，在需要精确控制页面顶部距离时很有用。
- `\smallskip`, `\medskip`, `\bigskip`
  - **作用**: 三个预设的、有弹性的垂直空白命令，空白高度依次增大。
  - **技巧**: 在文章中，应优先使用这三个命令而不是写死的 `\vspace{...}`。因为它们的高度是弹性的（可以稍微拉伸或压缩），能帮助 LaTeX 更好地优化页面布局，避免出现一页底部有大片空白的情况。

#### 2. 水平间距 (Horizontal Spacing)

- `\hspace{length}`

  - **作用**: 插入一个指定宽度的水平空白。同样有强制保留的 `\hspace*` 版本。
  - **示例**: `\hspace{1em}`

- `\hfill`

  - **作用**: 一个“水平弹簧”，它会尽可能地伸展，推开两边的内容。

  - 技巧/示例:

    - **两端对齐**: `左侧文字 \hfill 右侧文字` -> "左侧文字"会靠左，"右侧文字"会靠右。
  - **居中分布**: `A \hfill B \hfill C` -> A、B、C 会在行内均匀分布。
  
- `\quad` 和 `\qquad`

  - **作用**: 预设的水平空白。`\qquad` 的宽度是 `\quad` 的两倍。常用于段首缩进或公式内分隔。

- `~` (波浪号)

  - **作用**: **不换行空格 (Non-breaking Space)**。这是最重要的排版技巧之一。

  - 技巧: 用于那些绝不能被分开到两行的内容。

    - `图~\ref{fig:my_figure}` -> "图" 和 "1" 永远在一起。
    - `表~\ref{tab:my_table}` -> "表" 和 "1" 永远在一起。
    - `O(n log n)` -> `O(n~log~n)` 防止公式在中间断开。

#### 3. 换行与换页 (Line & Page Breaks)

- `\\` 或 `\newline`
  - **作用**: 强制换行。`\\` 更常用，功能也更强。
  - **技巧**: `\\[length]` 可以在换行的同时，额外增加指定的垂直间距。例如 `\\[3mm]`。
- `\newpage`
  - **作用**: 强制开始一个新页。
- `\clearpage`
  - **作用**: 与 `\newpage` 类似，但有一个**关键区别**。它会先把所有“悬浮”着等待排版的图（figure）和表（table）全部输出完毕，然后再开始一个新页。
  - **技巧**: 当你发现你的图表位置乱了，或者出现在了不该出现的章节里，通常是因为 LaTeX 为了优化页面而将它们“浮动”到了后面。在需要明确分割的地方（如一章的结尾）使用 `\clearpage` 可以强制图表“结算”，确保它们不会跑到下一章去。
